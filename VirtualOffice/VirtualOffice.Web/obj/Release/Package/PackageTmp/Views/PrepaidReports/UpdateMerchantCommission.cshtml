
@using VirtualOffice.Web.Controllers
@using VirtualOffice.Web.Models.NewReports
@model SearchUserModel
@{
    Layout = "~/Views/Shared/_NewUserLayout.cshtml";

    var merchants = ViewBag.Clients as List<SelectableClients>;
}

<div class="container select" id="main">
    @*<input id="storeProcedure" type="hidden" value="@Model.StoreProcedureName">*@
    <hr />
    
    <div class="panel-heading">
        <div class="row">
            <div class="hidden-xs col-sm-9 col-md-9">
                <h3>Update Merchant Commissions</h3>
            </div>
            <div class="col-xs-4 col-sm-3 col-md-3 text-right under15">
                <a class="btn btn-print btn-sm" id="PrintReportsBtn"><span class="glyphicon glyphicon-edit"></span> Commission</a>
                <a id="exportButton" class="btn btn-danger btn-sm" onclick="window.history.back();"><span class="glyphicon glyphicon-ban-circle"></span> Cancel</a>
            </div>
        </div>
    </div>
    

    <div class="row">
        <div class="col-xs-12 col-sm-12 col-md-12" id="sidebar">
            <div class="panel-group" id="accordion">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <a data-toggle="collapse" data-target="#collapse" class="expand">Select a customer's search criteria: <span class="glyphicon glyphicon-chevron-down pull-right"></span></a>
                    </div>
                    <div class="panel-body panel-collapse collapse" id="collapse">
                        <form id="filterMerchants">
                            <div class="col-xs-12 col-sm-3 col-md-3">
                                <div class="form-group">
                                    @Html.LabelFor(model => model.Code)
                                    @Html.TextBoxFor(model => model.Code, new { @class = "form-control", @placeholder = "Enter a client code", @type = "text" })
                                    @Html.ValidationMessageFor(model => model.Code)
                                </div>
                            </div>
                            <div class="col-xs-12 col-sm-3 col-md-3">
                                <div class="form-group">
                                    @Html.LabelFor(model => model.Name)
                                    @Html.TextBoxFor(model => model.Name, new { @class = "form-control", @placeholder = "Enter a client name", @type = "password" })
                                    @Html.ValidationMessageFor(model => model.Name)
                                </div>
                            </div>
                            <div>
                                <br/>
                                <button type="button" class="btn btn-secundary" onclick="applyUserfilters()">Go!</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    
    <div class="row top-20">
        <div class="col-xs-12 col-sm-12 col-md-12">
            <div class="panel panel-default">
                <div class="panel-body-kendo">
                    @(Html.Kendo().Grid<SelectableClients>()
                          .Name("Reports")
                                  .HtmlAttributes(new { @style = "text-align: left; " }).EnableCustomBinding(true)
                                  .Columns(columns =>
                          {
                              //columns.Bound(c => c.Selected);
                              columns.Bound(c => c.Code);
                              columns.Bound(c => c.Name);
                              columns.Bound(c => c.Type).Width(110);
                          })
                          .DataSource(ds => ds.Ajax()
                                              .Read(r => r.Action("RunRunUpdateMerchantCommission", "PrepaidReports"))
                                              .PageSize(100)
                          )
                          .Resizable(config => config.Columns(true))
                          .Sortable()
                          .Selectable()
                          .Reorderable(reorder => reorder.Columns(true))
                          .Scrollable(scr => scr.Height(600))
                          .Pageable(pageable => pageable.Refresh(true).PageSizes(new[] { 100, 200, 500 }).ButtonCount(5))
                          .AutoBind(true)
                    )
                </div>


            </div>
        </div>
    </div>
</div>
